{"version":3,"sources":["src/transaction.js"],"names":["axios","require","NodeRSA","module","exports","options","this","_public_key","public_key","_api_host","api_host","_api_key","api_key","_origin","origin","_service_provider_code","service_provider_code","_initiator_identifier","initiator_identifier","_security_credential","security_credential","_validation_errors","_isValidated","type","data","push","amount","isNumber","parseFloat","msisdn","isValidMSISDN","reference","third_party_reference","query_reference","transaction_id","length","_getBearerToken","certificate","setOptions","encryptionScheme","importKey","Buffer","from","token","encrypt","toString","Error","_request_headers","c2b","async","transaction_data","request","method","url","input_ServiceProviderCode","input_CustomerMSISDN","input_Amount","toFixed","input_TransactionReference","input_ThirdPartyReference","headers","Promise","resolve","reject","then","response","catch","error","query","query_data","reverse","input_ReversalAmount","Number","input_TransactionID","input_InitiatorIdentifier","input_SecurityCredential","request_headers","Content-Type","Origin","Authorization"],"mappings":";;;;;;AAOAA,MAAQC,QAAQ,SAChBC,QAAUD,QAAQ,YAMlBE,OAAOC,QAAU,SAAUC,GAoOzB,GAlOAC,KAAKC,YAAcF,EAAQG,WAC3BF,KAAKG,UAAYJ,EAAQK,SACzBJ,KAAKK,SAAWN,EAAQO,QACxBN,KAAKO,QAAUR,EAAQS,OACvBR,KAAKS,uBAAyBV,EAAQW,sBACtCV,KAAKW,sBAAwBZ,EAAQa,qBACrCZ,KAAKa,qBAAuBd,EAAQe,oBAEpCd,KAAKe,sBAOLf,KAAKgB,aAAe,SAASC,EAAMC,GAGjC,OAFAlB,KAAKe,sBAEEE,GACL,IAAK,SACEjB,KAAKG,WAAgC,KAAnBH,KAAKG,WAC1BH,KAAKe,mBAAmBI,KAAK,aAE1BnB,KAAKK,UAA8B,KAAlBL,KAAKK,UACzBL,KAAKe,mBAAmBI,KAAK,YAE1BnB,KAAKW,uBAAwD,KAA/BX,KAAKW,uBACtCX,KAAKe,mBAAmBI,KAAK,yBAE1BnB,KAAKO,SAA4B,KAAjBP,KAAKO,SACxBP,KAAKe,mBAAmBI,KAAK,WAE1BnB,KAAKC,aAAoC,KAArBD,KAAKC,aAC5BD,KAAKe,mBAAmBI,KAAK,eAE1BnB,KAAKa,sBAAsD,KAA9Bb,KAAKa,sBACrCb,KAAKe,mBAAmBI,KAAK,yBAE1BnB,KAAKS,wBAA0D,KAAhCT,KAAKS,wBACvCT,KAAKe,mBAAmBI,KAAK,0BAC/B,MACF,IAAK,MACGD,EAAKE,QAA0B,KAAhBF,EAAKE,QAAkBC,SAASC,WAAWJ,EAAKE,UACnEpB,KAAKe,mBAAmBI,KAAK,eAEzBD,EAAKK,QAA0B,KAAhBL,EAAKK,QAAkBC,cAAcN,EAAKK,SAC7DvB,KAAKe,mBAAmBI,KAAK,eAEzBD,EAAKO,WAAgC,KAAnBP,EAAKO,WAC3BzB,KAAKe,mBAAmBI,KAAK,kBAEzBD,EAAKQ,uBAAwD,KAA/BR,EAAKQ,uBACvC1B,KAAKe,mBAAmBI,KAAK,4BAE/B,MACF,IAAK,QACGD,EAAKS,iBAA4C,KAAzBT,EAAKS,iBACjC3B,KAAKe,mBAAmBI,KAAK,oBAEzBD,EAAKQ,uBAAwD,KAA/BR,EAAKQ,uBACvC1B,KAAKe,mBAAmBI,KAAK,8BAE/B,MACF,IAAK,WACGD,EAAKE,QAA0B,KAAhBF,EAAKE,QAAkBC,SAASC,WAAWJ,EAAKE,UACnEpB,KAAKe,mBAAmBI,KAAK,eAEzBD,EAAKU,gBAA0C,KAAxBV,EAAKU,gBAChC5B,KAAKe,mBAAmBI,KAAK,eAEzBD,EAAKQ,uBAAwD,KAA/BR,EAAKQ,uBACvC1B,KAAKe,mBAAmBI,KAAK,4BAGnC,QAAInB,KAAKe,mBAAmBc,OAAS,IAUvC7B,KAAK8B,gBAAkB,WACrB,GAAI9B,KAAKgB,aAAa,aAgBpB,OAdAe,YACE,+BACA/B,KAAKC,YACL,6BAGFC,WAAa,IAAIN,QACjBM,WAAW8B,YAAaC,iBAAkB,UAC1C/B,WAAWgC,UAAUC,OAAOC,KAAKL,aAAc,UAG/CM,MAAQnC,WAAWoC,QAAQH,OAAOC,KAAKpC,KAAKK,WAGrC,UAAY8B,OAAOC,KAAKC,OAAOE,SAAS,UAE/C,MAAMC,MAAM,gDAAkDxC,KAAKe,mBAAmBwB,aAO1FvC,KAAKyC,oBAULzC,KAAK0C,IAAMC,eAAgBC,GAEzB,GAAI5C,KAAKgB,aAAa,MAAO4B,GAe3B,OAdAC,SACEC,OAAQ,OACRC,IACE,WAAa/C,KAAKG,UAAY,yCAChCe,MACE8B,0BAA2BhD,KAAKS,uBAChCwC,qBAAsBL,EAAiBrB,OACvC2B,aAAc5B,WAAWsB,EAAiBxB,QAAQ+B,QAAQ,GAC1DC,2BAA4BR,EAAiBnB,UAC7C4B,0BAA2BT,EAAiBlB,uBAE9C4B,QAAStD,KAAKyC,wBAGH,IAAIc,QAAQ,SAAUC,EAASC,GAC1C/D,MAAMmD,SACHa,KAAK,SAAUC,GACdH,EAAQG,KAETC,MAAM,SAAUC,GACfJ,EAAOI,OAIb,MAAMrB,MAAM,gDAAkDxC,KAAKe,mBAAmBwB,aASxFvC,KAAK8D,MAASnB,eAAgBoB,GAC5B,GAAI/D,KAAKgB,aAAa,QAAS+C,GAgB7B,OAfAlB,SACEC,OAAQ,MACRC,IACE,WACA/C,KAAKG,UACL,+DACA4D,EAAWpC,gBACX,8BACA3B,KAAKS,uBACL,8BACAsD,EAAWrC,sBACb4B,QAAStD,KAAKyC,wBAIH,IAAIc,QAAQ,SAAUC,EAASC,GAC1C/D,MAAMmD,SACHa,KAAK,SAAUC,GACdH,EAAQG,EAASzC,QAElB0C,MAAM,SAAUC,GACfJ,EAAOI,EAAM3C,UAInB,MAAMsB,MAAM,gDAAkDxC,KAAKe,mBAAmBwB,aAW5FvC,KAAKgE,QAAU,SAAUpB,GACvB,GAAI5C,KAAKgB,aAAa,WAAY4B,GAiBhC,OAhBAC,SACEC,OAAQ,MACRC,IAAK,WAAa/C,KAAKG,UAAY,2BACnCe,MACE+C,qBAAsBC,OAAO5C,WAC3BsB,EAAiBxB,QACjB+B,QAAQ,GACVgB,oBAAqBvB,EAAiBhB,eACtCyB,0BAA2BT,EAAiBlB,sBAC5CsB,0BAA2BhD,KAAKS,uBAChC2D,0BAA2BpE,KAAKW,sBAChC0D,yBAA0BrE,KAAKa,sBAEjCyC,QAAStD,KAAKsE,iBAGT,IAAIf,QAAQ,SAAUC,EAASC,GACpC/D,MAAMmD,SACHa,KAAK,SAAUC,GACdH,EAAQG,EAASzC,QAElB0C,MAAM,SAAUC,GACfJ,EAAOI,EAAM3C,UAInB,MAAMsB,MAAM,gDAAkDxC,KAAKe,mBAAmBwB,cAItFvC,KAAKgB,aAAa,aAOpB,MAAMwB,MAAM,gDAAkDxC,KAAKe,mBAAmBwB,YANtFvC,KAAKyC,kBACH8B,eAAgB,mBAChBC,OAAQxE,KAAKO,QACbkE,cAAezE,KAAK8B"}